<html>
  <head>
    <title>zuck.js</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0" />

    <!-- demo styles -->
    <link rel="stylesheet" href="style.css">

    <!-- lib styles -->
    <link rel="stylesheet" href="zuck.min.css">
    
  </head>

  <body>
    <div id="stories" class="storiesWrapper"></div>

    <script src="zuck.js"></script>
    <script src="kaltura-ovp-player.js"></script>
    <script src="script.js"></script>

    <script>
      (async function(){
      const avialableStoriesResult = await fetch("http://ec2-3-121-201-181.eu-central-1.compute.amazonaws.com/playlists.php");
      const avialableStories = await avialableStoriesResult.json();
      const myStories = Object.values(avialableStories).map(user => (
        Zuck.buildTimelineItem(
          user.playlistId, 
          user.thumbnail, 
          user.user, 
          "", 
          timestamp(), 
          user.stories.map(entry => ([
              entry.id, 
              "kaltura", 
              0, 
              entry.id, 
              entry.thumbnailUrl, 
              '', 
              false, 
              false, 
              timestamp()
          ]))
        )
      ));
      
      // var currentSkin = getCurrentSkin();
      var stories = new Zuck('stories', {
        backNative: true,
        previousTap: true,
        // skin: currentSkin['name'],
        // autoFullScreen: currentSkin['params']['autoFullScreen'],
        // avatars: currentSkin['params']['avatars'],
        // paginationArrows: currentSkin['params']['paginationArrows'],
        // list: currentSkin['params']['list'],
        // cubeEffect: currentSkin['params']['cubeEffect'],
        localStorage: true,
        stories: myStories
        // [
        //   Zuck.buildTimelineItem(
        //     "ramon", 
        //     "https://raw.githubusercontent.com/ramon82/assets/master/zuck.js/users/1.jpg",
        //     "Ramon",
        //     "https://ramon.codes",
        //     timestamp(),
        //     items
        //   ),
        //   Zuck.buildTimelineItem(
        //     "gorillaz",
        //     "https://raw.githubusercontent.com/ramon82/assets/master/zuck.js/users/2.jpg",
        //     "Gorillaz",
        //     "",
        //     timestamp(),
        //     [
        //       ["gorillaz-1", "video", 0, "https://raw.githubusercontent.com/ramon82/assets/master/zuck.js/stories/4.mp4", "https://raw.githubusercontent.com/ramon82/assets/master/zuck.js/stories/4.jpg", '', false, false, timestamp()],
        //       ["gorillaz-2", "photo", 3, "https://raw.githubusercontent.com/ramon82/assets/master/zuck.js/stories/5.jpg", "https://raw.githubusercontent.com/ramon82/assets/master/zuck.js/stories/5.jpg", '', false, false, timestamp()],
        //     ]
        //   ),
        //   Zuck.buildTimelineItem(
        //     "ladygaga",
        //     "https://raw.githubusercontent.com/ramon82/assets/master/zuck.js/users/3.jpg",
        //     "Lady Gaga",
        //     "",
        //     timestamp(),
        //     [
        //       ["ladygaga-1", "photo", 5, "https://raw.githubusercontent.com/ramon82/assets/master/zuck.js/stories/6.jpg", "https://raw.githubusercontent.com/ramon82/assets/master/zuck.js/stories/6.jpg", '', false, false, timestamp()],
        //       ["ladygaga-2", "photo", 3, "https://raw.githubusercontent.com/ramon82/assets/master/zuck.js/stories/7.jpg", "https://raw.githubusercontent.com/ramon82/assets/master/zuck.js/stories/7.jpg", 'http://ladygaga.com', false, false, timestamp()],
        //     ]
        //   ),
        //   Zuck.buildTimelineItem(
        //     "starboy",
        //     "https://raw.githubusercontent.com/ramon82/assets/master/zuck.js/users/4.jpg",
        //     "The Weeknd",
        //     "",
        //     timestamp(),
        //     [
        //       ["starboy-1", "photo", 5, "https://raw.githubusercontent.com/ramon82/assets/master/zuck.js/stories/8.jpg", "https://raw.githubusercontent.com/ramon82/assets/master/zuck.js/stories/8.jpg", '', false, false, timestamp()]
        //     ]
        //   ),
        //   Zuck.buildTimelineItem(
        //     "riversquomo",
        //     "https://raw.githubusercontent.com/ramon82/assets/master/zuck.js/users/5.jpg",
        //     "Rivers Cuomo",
        //     "",
        //     timestamp(),
        //     [
        //       ["riverscuomo", "photo", 10, "https://raw.githubusercontent.com/ramon82/assets/master/zuck.js/stories/9.jpg", "https://raw.githubusercontent.com/ramon82/assets/master/zuck.js/stories/9.jpg", '', false, false, timestamp()]
        //     ]
        //   ),
        //   Zuck.buildTimelineItem(
        //     "riversquomo1",
        //     "https://raw.githubusercontent.com/ramon82/assets/master/zuck.js/users/5.jpg",
        //     "Rivers Cuomo",
        //     "",
        //     timestamp(),
        //     [
        //       ["riverscuomo", "photo", 10, "https://raw.githubusercontent.com/ramon82/assets/master/zuck.js/stories/9.jpg", "https://raw.githubusercontent.com/ramon82/assets/master/zuck.js/stories/9.jpg", '', false, false, timestamp()]
        //     ]
        //   )
        // ]
      });
    }());
    </script>
  </body>
</html>